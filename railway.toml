[[services]]
id = "backend"
source = "./backend"

[services.backend]
volumes = ["railway_uploads:/app/uploads"]
healthcheckPath = "/api/health"
restartPolicyType = "ON_FAILURE"

[services.backend.environment]
PORT = "5000"
JWT_SECRET = "your_jwt_secret_here_change_in_production"
NODE_ENV = "production"
# DATABASE_URL will be automatically set when attaching PostgreSQL

[[volumes]]
id = "railway_uploads"

[[services]]
id = "frontend"
source = "./frontend"

[services.frontend]
healthcheckPath = "/"
restartPolicyType = "ON_FAILURE"

[services.frontend.environment]
NEXT_PUBLIC_API_URL = "https://backend.railway.internal"
NODE_ENV = "production"